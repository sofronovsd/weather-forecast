(this["webpackJsonpweather-forecast"]=this["webpackJsonpweather-forecast"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(8),s=a.n(r),o=(a(13),a(0)),l=function(){return Object(o.jsxs)("div",{className:"logo",children:[Object(o.jsx)("span",{className:"logo__text logo__text--left",children:"Weather"}),Object(o.jsx)("span",{className:"logo__text logo__text--right",children:"forecast"})]})},i=a(2),d=a(3),u=a.n(d),j=(a(15),function(e){var t=e.children,a=e.className,c=u()(a,"card");return Object(o.jsx)("article",{className:c,children:t})}),h=[{name:"Samara",latitude:53.195873,longitude:50.100193},{name:"Tolyatti",latitude:53.507836,longitude:49.420393},{name:"Saratov",latitude:51.533557,longitude:46.034257},{name:"Kazan",latitude:55.796127,longitude:49.106405},{name:"Krasnodar",latitude:45.03547,longitude:38.975313}],m=(a(16),function(e){var t=e.placeholder,a=e.options,n=e.className,r=e.handleSelect,s=e.disabled,l=Object(c.useState)(),d=Object(i.a)(l,2),j=d[0],h=d[1],m=Object(c.useRef)(null),f=Object(c.useRef)(null),b=u()(n,"dropdown","text","text--secondary");return Object(o.jsxs)("button",{className:b,ref:m,onFocus:function(){var e;null===(e=f.current)||void 0===e||e.classList.add("dropdown__option-list--visible")},onBlur:function(){var e;null===(e=f.current)||void 0===e||e.classList.remove("dropdown__option-list--visible")},disabled:s,children:[j||t,Object(o.jsx)("div",{className:"dropdown__option-list",ref:f,children:a.map((function(e){return Object(o.jsx)("div",{onClick:function(){return function(e){var t;r(e),h(e.name),null===(t=m.current)||void 0===t||t.blur()}(e)},children:e.name},e.name)}))})]})}),f=a.p+"static/media/Academy-Weather-bg160.1a743710.svg",b=a.p+"static/media/chevron-left.668da982.svg",x=a.p+"static/media/chevron-right.d8b7c444.svg",p=(a(17),a(4)),O=a.n(p),w=a(7),_=function(){var e=Object(w.a)(O.a.mark((function e(t,a,c){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall/timemachine?lat=".concat(t,"&lon=").concat(a,"&dt=").concat(c,"&units=metric&appid=").concat("99b2c9cddbdfd0869a20f9293b2539fa"));case 2:if(!(n=e.sent).ok){e.next=7;break}return e.abrupt("return",n.json());case 7:throw new Error("Cannot fetch historical weather");case 8:case"end":return e.stop()}}),e)})));return function(t,a,c){return e.apply(this,arguments)}}(),g=function(){var e=Object(w.a)(O.a.mark((function e(t,a){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(t,"&lon=").concat(a,"&units=metric&exclude=current,minutely,hourly,alerts&appid=").concat("99b2c9cddbdfd0869a20f9293b2539fa"));case 2:if(!(c=e.sent).ok){e.next=7;break}return e.abrupt("return",c.json());case 7:throw new Error("Cannot fetch forecast");case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),y=(a(19),a(5)),v=a.n(y),N=function(e){var t=e.className,a=e.icon,c=e.temp,n=e.date,r=e.iconClassName,s=u()(t,"weather-card"),l=u()(r,"weather-card__icon"),i="http://openweathermap.org/img/wn/".concat(a,"@2x.png");return Object(o.jsxs)(j,{className:s,children:[Object(o.jsx)("img",{className:l,src:i,alt:"weather"}),Object(o.jsx)("h1",{className:"weather-card__temp text--weak",children:"".concat(c>0?"+":"-").concat(Math.floor(c),"\xb0")}),Object(o.jsx)("span",{className:"weather-card__date text text--weak text--bold",children:v()(1e3*n).format("DD MMM YYYY")})]})},k={name:"",longitude:0,latitude:0},S={daily:[]},C=function(){var e=Object(c.useState)(k),t=Object(i.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(S),s=Object(i.a)(r,2),l=s[0],d=s[1],p=Object(c.useState)(!1),O=Object(i.a)(p,2),w=O[0],_=O[1],y=Object(c.useState)(0),v=Object(i.a)(y,2),C=v[0],E=v[1],M=u()("weekly-forecast-card__arrow","weekly-forecast-card__arrow--left",{"weekly-forecast-card__arrow--disabled":0===C}),Y=u()("weekly-forecast-card__arrow","weekly-forecast-card__arrow--right",{"weekly-forecast-card__arrow--disabled":5===C});Object(c.useEffect)((function(){a.name&&(_(!0),g(a.latitude,a.longitude).then((function(e){d(e)})).catch((function(e){console.log("Error:",e.message)})).finally((function(){_(!1)})))}),[a]);var D=Object(c.useMemo)((function(){return l.daily.length>0}),[l]);return Object(o.jsxs)(j,{children:[Object(o.jsx)("h1",{className:"weekly-forecast-card__header",children:"7 Days Forecast"}),Object(o.jsx)(m,{className:"weekly-forecast-card__dropdown",placeholder:"Select city",options:h,handleSelect:function(e){n(e)},disabled:w}),Object(o.jsx)("div",{className:"weekly-forecast-card__image-container",children:D?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("img",{className:M,src:b,onClick:function(){C>0&&E((function(e){return e-1}))},alt:"left"}),Object(o.jsx)("img",{className:Y,src:x,onClick:function(){C<5&&E((function(e){return e+1}))},alt:"left"}),Object(o.jsxs)("div",{className:"weekly-forecast-card__forecast-container",children:[Object(o.jsx)(N,{icon:l.daily[C].weather[0].icon,temp:l.daily[C].temp.max,date:l.daily[C].dt,iconClassName:"weekly-forecast-card__weather-icon",className:"weekly-forecast-card__weather-card"}),Object(o.jsx)(N,{icon:l.daily[C+1].weather[0].icon,temp:l.daily[C+1].temp.max,date:l.daily[C+1].dt,iconClassName:"weekly-forecast-card__weather-icon",className:"weekly-forecast-card__weather-card"}),Object(o.jsx)(N,{icon:l.daily[C+2].weather[0].icon,temp:l.daily[C+2].temp.max,date:l.daily[C+2].dt,iconClassName:"weekly-forecast-card__weather-icon",className:"weekly-forecast-card__weather-card"})]})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("img",{src:f,className:"weekly-forecast-card__mock-image",alt:"mocked weather"}),Object(o.jsx)("span",{className:"text text--secondary text--bold text--center",children:"Fill in all the fields and the weather will be displayed"})]})})]})},E=(a(21),a(22),function(e){var t=e.placeholder,a=e.handleSelect,n=e.disabled,r=Object(c.useState)(""),s=Object(i.a)(r,2),l=s[0],d=s[1];return Object(o.jsx)("input",{type:"text",className:"date-picker text text--secondary",placeholder:t,value:l,onChange:function(e){var t=e.target.value;d(t),a(t)},disabled:n})}),M={name:"",longitude:0,latitude:0},Y={current:{dt:0,temp:0,weather:[]}},D=function(){var e,t=Object(c.useState)(M),a=Object(i.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(""),l=Object(i.a)(s,2),d=l[0],u=l[1],b=Object(c.useState)(!1),x=Object(i.a)(b,2),p=x[0],O=x[1],w=Object(c.useState)(Y),g=Object(i.a)(w,2),y=g[0],k=g[1];Object(c.useEffect)((function(){if(n.name&&/[0-9/]{10}/.test(d)){O(!0);var e=v()(d,"DD/MM/YYYY").add(12,"hours").toDate().getTime()/1e3;_(n.latitude,n.longitude,e).then((function(e){k(e)})).catch((function(e){console.log("Error:",e.message)})).finally((function(){O(!1)}))}}),[n,d]);var S=Object(c.useMemo)((function(){return y.current.weather.length>0}),[y]);return Object(o.jsxs)(j,{children:[Object(o.jsx)("h1",{className:"date-forecast-card__header",children:"Forecast for a Date in the Past"}),Object(o.jsxs)("div",{className:"date-forecast-card__inputs-container",children:[Object(o.jsx)(m,{placeholder:"Select city",options:h,handleSelect:function(e){r(e)},disabled:p}),Object(o.jsx)(E,{placeholder:"Select date",handleSelect:function(e){u(e)},disabled:p})]}),Object(o.jsx)("div",{className:"date-forecast-card__image-container",children:S?Object(o.jsx)(N,{icon:null===(e=y.current.weather[0])||void 0===e?void 0:e.icon,temp:y.current.temp,date:y.current.dt}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("img",{src:f,className:"date-forecast-card__mock-image",alt:"mocked weather"}),Object(o.jsx)("span",{className:"text text--secondary text--bold text--center",children:"Fill in all the fields and the weather will be displayed"})]})})]})},F=(a(23),function(){return Object(o.jsxs)("article",{className:"main-page",children:[Object(o.jsx)("header",{className:"main-page__header",children:Object(o.jsx)(l,{})}),Object(o.jsxs)("main",{className:"main-page__main",children:[Object(o.jsx)(C,{}),Object(o.jsx)(D,{})]}),Object(o.jsx)("footer",{className:"main-page__footer",children:Object(o.jsx)("span",{className:"text text--small text--weak",children:"C \u041b\u042e\u0411\u041e\u0412\u042c\u042e \u041e\u0422 MERCURY DEVELOPMENT"})})]})}),R=function(){return Object(o.jsx)(F,{})};a(24);s.a.render(Object(o.jsx)(n.a.StrictMode,{children:Object(o.jsx)(R,{})}),document.getElementById("root"))}],[[25,1,2]]]);
//# sourceMappingURL=main.37383692.chunk.js.map